#!/usr/bin/make -f

%:
	dh $@

INSTALLROOT=opt/locus/{{ bundle_name }}

export ROS_LANG_DISABLE=genlisp;genjava
# export DEB_CXXFLAGS_MAINT_APPEND={{ cxx_flags | join(' ') }}

override_dh_auto_configure:
override_dh_auto_build:
override_dh_shlibdeps:
override_dh_perl:
override_dh_makeshlibs:

override_dh_auto_configure:
	TERM=dumb catkin config \
		--install \
		--source-space . \
		--build-space debian/tmp/build \
		--devel-space debian/tmp/devel \
		--log-space debian/tmp/logs \
		--isolate-devel \
		--install-space debian/tmp/$(INSTALLROOT) \
		--cmake-args -DCMAKE_CXX_STANDARD='{{ cxx_standard }}' -- \
		--no-extend

 # -DCMAKE_CXX_FLAGS='{{ cxx_flags | join(';') }}'

override_dh_auto_install:
	ROS_HOME=debian/tmp TERM=dumb catkin build --no-status
	debian/fix_install_paths "debian/tmp/$(INSTALLROOT)" "/$(INSTALLROOT)"
